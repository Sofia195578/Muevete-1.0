<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Ejercicios del Mes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Manrope:wght@400;700&display=swap"
    rel="stylesheet" />
</head>

<body>
  <a href="./inicio (1).html" class="btn-salida" title="Volver a inicio">✖</a>
  <h1 class="text-center mb-5">Ejercicios de Bienestar</h1>
  <div id="contenedor-ejercicios"></div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const ejerciciosDisponibles = [
        { nombre: "💆‍♀️ Estiramiento de brazos hacia arriba", imagen: "./img/1.jpg"},
        { nombre: "🧘‍♀️ Respiración consciente (3 ciclos)", imagen: "./img/2.jpg" },
        { nombre: "🪶‍♂️ Caminar alrededor del lugar", imagen: "./img/3.jpg" },
        { nombre: "🤸‍♀️ Rotación de cuello lenta", imagen: "./img/4.jpg" },
        { nombre: "↔️ Estiramiento lateral", imagen: "./img/5.jpg" },
        { nombre: "🌬️ Inhalación y exhalación guiada", imagen: "./img/2.jpg" },
        { nombre: "✋ Estiramiento de muñecas", imagen: "./img/7.jpg" },
        { nombre: "💪 Movimiento de hombros en círculos", imagen: "./img/8.jpg" },
        { nombre: "😌 Cerrar ojos y respirar profundamente", imagen: "./img/2.jpg" },
        { nombre: "🦵 Elevar rodillas alternadas sentado", imagen: "./img/10.jpg" },
        { nombre: "🧾 Sacudir piernas y brazos", imagen: "https://cdn-icons-png.flaticon.com/512/863/863810.png" },
        { nombre: "😇 Estiramiento de espalda baja", imagen: "https://cdn-icons-png.flaticon.com/512/863/863836.png" },
        { nombre: "👣 Paseo corto o marcha en el lugar", imagen: "https://cdn-icons-png.flaticon.com/512/3408/3408545.png" },
        { nombre: "💆‍♀️ Masaje suave en cuello y hombros", imagen: "https://cdn-icons-png.flaticon.com/512/4052/4052846.png" },
        { nombre: "💧 Beber un vaso de agua", imagen: "https://cdn-icons-png.flaticon.com/512/3045/3045886.png" },
        { nombre: "🌤️ Mirar por la ventana durante", imagen: "https://cdn-icons-png.flaticon.com/512/1146/1146869.png" },
        { nombre: "🦶 Hacer círculos con los tobillos", imagen: "https://cdn-icons-png.flaticon.com/512/3048/3048127.png" },
        { nombre: "🐈 Estirarse como gato (espalda arqueada)", imagen: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
        { nombre: "✍️ Dibujar o escribir algo", imagen: "https://cdn-icons-png.flaticon.com/512/3281/3281289.png" },
        { nombre: "🎵🌳️ Escuchar sonidos de la naturaleza", imagen: "https://cdn-icons-png.flaticon.com/512/3659/3659898.png" }
      ];

      const contenedor = document.getElementById('contenedor-ejercicios');

      // Crear los días con ejercicios
      for (let dia = 1; dia <= 30; dia++) {
        const copia = [...ejerciciosDisponibles];
        const seleccionados = [];
        for (let i = 0; i < 5; i++) {
          const index = Math.floor(Math.random() * copia.length);
          seleccionados.push(copia.splice(index, 1)[0]);
        }

        const seccion = document.createElement('section');
        seccion.id = `dia${dia}`;
        seccion.classList.add('dia');

        // Título del día
        const titulo = document.createElement('h3');
        titulo.textContent = `Día ${dia}`;
        seccion.appendChild(titulo);

        // Crear tarjetas de ejercicios
        seleccionados.forEach(ejercicio => {
          const card = document.createElement('div');
          card.className = 'card-ejercicio';
          card.innerHTML = `
            <p>${ejercicio.nombre}</p>
            <img src="${ejercicio.imagen}" alt="${ejercicio.nombre}">
            <div class="acciones">
              <button class="btn btn-success btn-sm realizar-btn">Realizar</button>
              <button class="btn btn-warning btn-sm posponer-btn">Posponer</button>
            </div>
            <span class="cronometro text-muted"></span>
          `;
          seccion.appendChild(card);
        });

        // Botón de recompensa
        const botonRecompensa = document.createElement('button');
        botonRecompensa.className = 'recibir-btn';
        botonRecompensa.textContent = 'Recibir Recompensa';
        seccion.appendChild(botonRecompensa);

        contenedor.appendChild(seccion);
      }

      // Resaltar día activo si hay hash en la URL
      window.addEventListener("load", () => {
        const hash = window.location.hash;
        if (hash) {
          const activo = document.querySelector(hash);
          if (activo) activo.classList.add("activo");
        }
      });

      // Manejar eventos
      contenedor.addEventListener('click', (e) => {
        // Botón Realizar
        if (e.target.classList.contains('realizar-btn')) {
          const card = e.target.closest('.card-ejercicio');
          const span = card.querySelector('.cronometro');
          let tiempo = 10;
          span.textContent = `⏱️ ${tiempo}s`;
          e.target.disabled = true;

          const intervalo = setInterval(() => {
            tiempo--;
            span.textContent = `⏱️ ${tiempo}s`;
            if (tiempo === 0) {
              clearInterval(intervalo);
              span.textContent = '✅ Completado';
              card.style.boxShadow = '0 6px 12px rgba(46, 125, 50, 0.3)';
            }
          }, 1000);
        }

        // Botón Posponer
        if (e.target.classList.contains('posponer-btn')) {
          const card = e.target.closest('.card-ejercicio');
          const ejercicio = {
            nombre: card.querySelector('p').textContent,
            imagen: card.querySelector('img').src
          };
          const actual = parseInt(card.closest('section').id.replace('dia', ''));
          const siguiente = actual + 1;
          const siguienteSeccion = document.querySelector(`#dia${siguiente}`);

          if (siguienteSeccion) {
            const nuevaCard = document.createElement('div');
            nuevaCard.className = 'card-ejercicio';
            nuevaCard.innerHTML = `
              <p>${ejercicio.nombre}</p>
              <img src="${ejercicio.imagen}" alt="${ejercicio.nombre}">
              <div class="acciones">
                <button class="btn btn-success btn-sm realizar-btn">Realizar</button>
                <button class="btn btn-warning btn-sm posponer-btn">Posponer</button>
              </div>
              <span class="cronometro text-muted"></span>
            `;
            // Insertar antes del botón de recompensa
            siguienteSeccion.insertBefore(nuevaCard, siguienteSeccion.lastChild);
            card.remove();
          } else {
            Swal.fire({
              title: '¡Ups!',
              text: 'No hay un día siguiente para posponer este ejercicio 😅',
              icon: 'warning',
              confirmButtonText: 'Entendido'
            });
          }
        }

        // Botón Recibir Recompensa
        if (e.target.classList.contains('recibir-btn')) {
          const seccion = e.target.closest('section');
          const cards = seccion.querySelectorAll('.card-ejercicio');
          const completados = Array.from(cards).filter(card => {
            return card.querySelector('.cronometro').textContent.includes('✅');
          }).length;

          // Validar que haya al menos un ejercicio completado
          if (completados === 0) {
            Swal.fire({
              title: '¡Espera!',
              text: 'Debes completar al menos un ejercicio para recibir tu recompensa',
              icon: 'error',
              confirmButtonText: 'Entendido'
            });
            return;
          }

          const total = cards.length;
          const porcentaje = completados / total;
          const puntos = Math.floor((porcentaje * 40) + 10); // mínimo 10, máximo 50
          const tipo = Math.random() > 0.5 ? 'individuales' : 'grupales';

          // Mostrar SweetAlert con la recompensa
          Swal.fire({
            title: '🎉 ¡Felicidades!',
            html: `
              <div style="font-size: 1.2rem; margin-bottom: 1.5rem;">
                Has completado <strong>${completados} de ${total}</strong> ejercicios
              </div>
              <div style="font-size: 2rem; color: #5d6939; font-weight: bold; margin: 1.5rem 0;">
                +${puntos} puntos ${tipo}
              </div>
              <div style="font-size: 4rem;">🏆</div>
            `,
            icon: 'success',
            confirmButtonText: '¡Gracias!',
            background: '#faf2e5',
            customClass: {
              popup: 'sweet-alert-popup',
              title: 'sweet-alert-title'
            },
            showClass: {
              popup: 'animate__animated animate__zoomIn'
            },
            hideClass: {
              popup: 'animate__animated animate__zoomOut'
            }
          });
        }
      });
    });
  </script>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=MuseoModerno:ital,wght@0,100..900;1,100..900&display=swap");

    body {
      background: #e4e3e3;
      background-size: cover;
      backdrop-filter: blur(4px);
      font-family: "MuseoModerno", sans-serif;
      color: #3e4a25;
      padding: 40px 20px;
    }

    .dia {
      background: #faf2e5;
      border-radius: 30px;
      padding: 30px;
      margin-bottom: 40px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-around;
      gap: 20px;
    }

    .dia.activo {
      border: 3px solid #5d6939;
      box-shadow: 0 0 25px rgba(93, 105, 57, 0.4);
    }

    .dia h3 {
      width: 100%;
      text-align: center;
      color: #5d6939;
      font-family: "MuseoModerno", sans-serif;
      margin-bottom: 25px;
      font-size: 1.8rem;
    }

    .card-ejercicio {
      background: #fff;
      width: 200px;
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .card-ejercicio:hover {
      transform: translateY(-5px);
    }

    .card-ejercicio p {
      margin-bottom: 15px;
      font-weight: 600;
      color: #5d6939;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-ejercicio img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 10px;
    }

    .card-ejercicio .acciones {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .card-ejercicio .cronometro {
      display: block;
      margin-top: 8px;
      font-weight: bold;
      font-size: 14px;
      color: #5d6939;
      min-height: 20px;
    }

    .recibir-btn {
      width: 100%;
      background-color: #5d6939;
      color: white;
      font-weight: bold;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 16px;
      margin-top: 25px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .recibir-btn:hover {
      background-color: #4a5530;
      transform: scale(1.02);
    }

    /* Estilos para SweetAlert */
    .swal2-popup {
      border-radius: 20px !important;
      background: #faf2e5 !important;
    }

    .swal2-title {
      color: #5d6939 !important;
      font-family: "MuseoModerno", sans-serif !important;
    }

    .swal2-confirm {
      background-color: #5d6939 !important;
    }

    .btn-salida {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      background-color: rgba(255, 255, 255, 0.5);
      color: #5d6939;
      border: 2px solid #5d6939;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      text-align: center;
      line-height: 35px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .btn-salida:hover {
      background-color: #5d6939;
      color: white;
    }

    a {
      color: rgb(255 255 255);
      text-decoration: none;
    }
  </style>
</body>

</html>
